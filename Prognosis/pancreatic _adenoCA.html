<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pancreatic Adenocarcinoma Radiological Prognosis Suite</title>
    <style>
        :root {
            --primary-color: #002855;
            --secondary-color: #b58500;
            --danger-color: #c0392b;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-color: #2d3436;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            padding: 30px;
            border-top: 6px solid var(--primary-color);
        }

        h1, h2 { color: var(--primary-color); margin-top: 0; }
        h1 { border-bottom: 2px solid #eee; padding-bottom: 10px; font-size: 1.6rem; }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .input-group { display: flex; flex-direction: column; gap: 8px; }
        label { font-weight: 700; font-size: 0.9rem; color: #555; }
        
        select, input {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 1rem;
        }

        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
        }

        button:hover { background-color: #946d00; }

        .result-panel {
            margin-top: 25px;
            padding: 20px;
            border-radius: 10px;
            display: none;
            border-left: 6px solid var(--primary-color);
            background-color: #f1f4f8;
        }

        .prognosis-tag {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .high-risk { background-color: var(--danger-color); }
        .intermediate-risk { background-color: #d35400; }
        .low-risk { background-color: #27ae60; }

        /* Chart Styling */
        .chart-container {
            text-align: center;
            margin-top: 20px;
        }

        .chart-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #eee;
        }

        .ref-section {
            padding: 20px;
            font-size: 0.85rem;
            color: #7f8c8d;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h1>Pancreatic Adenocarcinoma: Radiological Staging & Resectability</h1>
        <p><i>Note: This analyzer uses American Joint Committee on Cancer 8th Edition size criteria and National Comprehensive Cancer Network vascular contact guidelines.</i></p>
        
        <div class="input-grid">
            <div class="input-group">
                <label>Tumor Maximum Dimension (Centimeters)</label>
                <input type="number" id="tumorSize" step="0.1" placeholder="e.g., 2.5">
            </div>

            <div class="input-group">
                <label>Major Arterial Contact (Celiac, SMA, or CHA)</label>
                <select id="arterialContact">
                    <option value="none">No contact</option>
                    <option value="lte180">Contact &le; 180&deg;</option>
                    <option value="gt180">Contact &gt; 180&deg; (Encasement)</option>
                    <option value="aorta">Involvement of Aorta</option>
                </select>
            </div>

            <div class="input-group">
                <label>Major Venous Contact (Portal Vein or SMV)</label>
                <select id="venousContact">
                    <option value="none">No contact</option>
                    <option value="lte180">Contact &le; 180&deg;</option>
                    <option value="gt180">Contact &gt; 180&deg; / Occlusion (Reconstructible)</option>
                    <option value="unrecon">Occlusion (Unreconstructible)</option>
                </select>
            </div>

            <div class="input-group">
                <label>Distant Metastasis / Peritoneal Disease</label>
                <select id="metastasis">
                    <option value="no">Absent (Metastasis 0)</option>
                    <option value="yes">Present (Metastasis 1)</option>
                </select>
            </div>
        </div>

        <button onclick="calculatePrognosis()">Analyze Radiological Prognosis</button>

        <div id="prognosisResult" class="result-panel">
            <div id="riskLevel" class="prognosis-tag"></div>
            <div id="stagingInfo"></div>
            <div id="resectabilityInfo" style="margin-top:15px; font-weight:bold;"></div>
            <div id="prognosticNotes" style="margin-top:10px; font-size:0.95rem;"></div>
        </div>
    </div>

    <div class="card">
        <h2>Tumor Node Metastasis (TNM) Visual Reference</h2>
        <div class="chart-container">
            <img src="./TMN/Pancreatic%20adenocarcinoma.png" 
                 alt="Pancreatic Adenocarcinoma TNM Staging Chart" 
                 class="chart-image">
        </div>
    </div>

    <div class="card ref-section">
        <h3>References</h3>
        <ol>
            <li>National Comprehensive Cancer Network. Pancreatic Adenocarcinoma (Version 2.2025).</li>
            <li>American Joint Committee on Cancer (AJCC) Cancer Staging Manual, 8th Edition.</li>
            <li>van Roessel S, et al. International Validation of the Eighth Edition of the American Joint Committee on Cancer (AJCC) TNM Staging System in Patients With Resected Pancreatic Cancer. JAMA Surgery. 2018;153(12):e183617.</li>
            <li>Kim HS, et al. Prognostic Accuracy of ypTNM Stage in Patients With Pancreatic Cancer in the Era of Modern Neoadjuvant Therapy. Annals of Surgical Oncology. 2025.</li>
        </ol>
    </div>
</div>

<script>
    function calculatePrognosis() {
        const size = parseFloat(document.getElementById('tumorSize').value);
        const arterial = document.getElementById('arterialContact').value;
        const venous = document.getElementById('venousContact').value;
        const met = document.getElementById('metastasis').value;
        
        if (isNaN(size)) {
            alert("Please enter a valid tumor size.");
            return;
        }

        let tStage = "";
        let resectability = "";
        let riskClass = "";
        let survivalNote = "";

        // T-Staging Logic (AJCC 8th)
        if (arterial === 'gt180' || arterial === 'aorta') {
            tStage = "Tumor 4 (Arterial Involvement)";
        } else if (size <= 2) {
            tStage = "Tumor 1";
        } else if (size > 2 && size <= 4) {
            tStage = "Tumor 2";
        } else {
            tStage = "Tumor 3";
        }

        // Resectability Logic (NCCN)
        if (met === 'yes') {
            resectability = "Metastatic Disease (Stage IV)";
            riskClass = "high-risk";
            survivalNote = "Poor prognosis; primary focus is systemic therapy and palliation.";
        } else if (arterial === 'gt180' || arterial === 'aorta' || venous === 'unrecon') {
            resectability = "Locally Advanced / Unresectable (Stage III)";
            riskClass = "high-risk";
            survivalNote = "High risk of margin-positive resection; median overall survival historically approximately 11.2 months.";
        } else if (arterial === 'lte180' || (venous === 'gt180' && venous !== 'unrecon')) {
            resectability = "Borderline Resectable";
            riskClass = "intermediate-risk";
            survivalNote = "Neoadjuvant therapy is typically indicated to downstage or assess biology before resection.";
        } else {
            resectability = "Upfront Resectable";
            riskClass = "low-risk";
            survivalNote = "Best candidate for surgical cure; 5-year survival approximately 35.6% if node-negative (Node 0).";
        }

        // Output Display
        document.getElementById('riskLevel').innerText = riskClass.replace("-", " ").toUpperCase();
        document.getElementById('riskLevel').className = `prognosis-tag ${riskClass}`;
        document.getElementById('stagingInfo').innerHTML = `<strong>Radiological T-Stage:</strong> ${tStage}<br><strong>Staging System:</strong> American Joint Committee on Cancer 8th Edition`;
        document.getElementById('resectabilityInfo').innerHTML = `National Comprehensive Cancer Network Status: ${resectability}`;
        document.getElementById('prognosticNotes').innerHTML = `<strong>Clinical Note:</strong> ${survivalNote}`;
        document.getElementById('prognosisResult').style.display = "block";
    }
</script>

</body>
</html>
